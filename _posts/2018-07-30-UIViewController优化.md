---
layout: post
title: UIViewController优化
date: 2018-07-30
categories: iOS
tags: iOS 
---

### 一、代码组织结构

保证代码结构的清晰化，良好的代码结构有利于代码的传承、可读以及维护，通常我是这样控制代码结构的：

1. LifeCycle（生命周期代码）
如viewDidLoad等

2. Notification（通知）
每个通知都最好写上备注，不然以后都忘了是干嘛的

3. Action（操作）
一些操作

4. Delegate（代理）
每一个代理方法都对应上相应的协议，同样怕忘记

5. UI
没太多可说的，封装的足够好就行

6. Getter & Setter
不要添加比较重要重要的业务逻辑，重要的业务逻辑应该单独拿出来，方便定位入口

### 二、子控制器的使用

相对比较复杂的界面通常情况下可以考虑添加子控制的实现方式，前提是父控制器和子控制器之间的消息交互较少

*  优点：
把相关的业务逻辑分解一部分到子控制器中，主业务逻辑对应的代码量瞬间减少很多，代码封装和分离十分清晰。

*  缺点：
父控制器和子控制器之间的消息传递有时需要做额外的处理，尤其是子控制器的消息回调。

### 三、合理拆分模块

1. 模块拆分大小要合理
如果模块被拆分的太粗糙，基本就是简单的封装，并没有进一步细化，只是将所有的功能集中在一起，这样做似乎没有太大意义，如果模块被拆分的很细，控制器中执行相关模块的功能就要调用相关模块代码，似乎代码量并不会减少太多，有可能还会产生更多代码。

2. 减少跨层数据交流
这个不用多解释，跨层数据交流多了项目维护起来头要大了

3. 合理使用策略模式和组合方式解决问题
取代switch,if-else之类的分支语句，避免代码繁琐,杂乱无章,拆分困难。

### 四、MVVM中ViewModel的使用

参考MVVM架构设计，比如UITableView中Delegate和DataSource的提取和封装，ReactiveCocoa或RXSwift实现数据绑定