---
layout: post
title: 'OC转Swift总结'
date: 2018-08-06
author: Perfectcjh
tags: Swift iOS
---

在Swift4.0发布，第三方支持的框架也越来越多，我正式开始使用Swift+OC（Swift为主，OC辅助）写项目。虽然Swift与OC共用CocoaTouch框架，但是差异还是非常大的，尤其是编程思想上。

### 一、对类型要求十分严格

这点在OC转Swift的开始是非常不习惯的，毕竟OC是弱类型语言，比如int和Double互相换着传也没事，Swift是强类型语言，即使UInt传给Int也会报错。

### 二、可选值

Swift对一个类型是否有值也十分严格，这点也是一开始比较难接受的，虽然官方教程讲解已经比较透彻，但我还是花了一段时间才慢慢习惯。比如var a: String?  var b: String = "lalal"，当a+b操作是，需要对a进行解包，即确定不为空可强制解包a!，也可以设置解包失败的默认值a ?? "0"。

### 三、闭包的使用

Swift闭包确实方便的很多，用习惯后都开始忘记OC的Block是怎么写的了
Swift闭包：
定义
```
((参数1, 参数2) -> 返回值) 
```
使用
```
{ [weak self] (参数1, 参数2) in  }  //（[weak self]是弱引用的写法，可不写）
```
OCBlock：
定义
```
(返回值(^名称)(参数1, 参数2))
```
使用
```
^(参数1, 参数2){ }
```

### 四、get/set方法

不多做解释（我在Swift中很少去写get/set方法，一方面好像没什么必要，另一方面比较懒吧，一写就是两个都要写，怕麻烦，情愿在外面定义方法处理了）。

### 五、初始化问题

Swift类的初始化非常严格，加入了很多限制：必要构造器、逐一构造器、便利构造器、默认构造器、指定构造器、可失败构造器（说真的都看一遍就好了，基本都使用便利构造器）。

### 六、String、Array、Dictionary

看文档就好，最大的特点就是都是结构体struct，值类型，每次赋值都会将值赋值给新的一个变量，而引用类型每次赋值都是指向同一个引用。

### 七、泛型

就当做OC中的id来理解就好了，别的语言早就玩透了。

### 八、面向协议编程

这个写项目过程中慢慢体会，慢慢去转变自己的编程思想，可以参考一些资料。

### 九、函数式编程

Swift的Sequence协议中提供了类似RAC、RxSwift的map、filter、zip、reduce方法，可以更方便的编程
